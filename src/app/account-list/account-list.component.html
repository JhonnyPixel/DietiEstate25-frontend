<app-navbar></app-navbar>

<div class="max-w-2xl mx-auto p-4">
  <h2 class="text-2xl font-bold mb-4">Account Manager</h2>
  <button (click)="showForm = true; isEditing = false;resetForm()" class="bg-orange-400 text-white px-4 py-2 rounded mb-4">Aggiungi Account</button>
  
  @if(showForm){
  <div class="bg-gray-100 p-4 rounded mb-4">
    <h3 class="text-lg font-semibold mb-2">{{ isEditing ? 'Modifica Account' : 'Nuovo Account' }}</h3>
    <input [(ngModel)]="newAccount.name" placeholder="Nome" class="border p-2 w-full mb-2" />
    <input [(ngModel)]="newAccount.lastname" placeholder="Cognome" class="border p-2 w-full mb-2" />
    <input [(ngModel)]="newAccount.email" placeholder="Email" type="email" class="border p-2 w-full mb-2" />
    <input [(ngModel)]="newAccount.dateOfBirth" placeholder="Data di Nascita" type="date" class="border p-2 w-full mb-2" />
    <input [(ngModel)]="newAccount.password" placeholder="Password" type="password" class="border p-2 w-full mb-2" />
    <input [(ngModel)]="newAccount.profilePicture" placeholder="URL Immagine Profilo" class="border p-2 w-full mb-2" />
    <select [(ngModel)]="newAccount.type" class="border p-2 w-full mb-2" [disabled]="isEditing">
      <option value="Manager">Manager</option>
      <option value="Agente">Agente</option>
    </select>
    <div class="flex gap-2">
      <button (click)="saveAccount()" class="bg-blue-500 text-white px-4 py-2 rounded">{{ isEditing ? 'Aggiorna' : 'Salva' }}</button>
      <button (click)="resetForm();showForm=false" class="bg-red-500 text-white px-4 py-2 rounded">Annulla</button>
    </div>
  </div>
  }
  
  <div class="bg-white shadow-md rounded-lg p-4 mb-4">
    <h3 class="text-lg font-semibold mb-2">Manager</h3>
    <ul>
      @for(account of managers;track account){
      <li class="p-2 border-b last:border-b-0 flex justify-between items-center">
        <span>{{ account.name }} {{ account.lastname }}</span>
        <div class="flex gap-2">
          <button (click)="editAccount(account)" class="text-blue-500 px-2"><fa-icon [icon]="faPen"></fa-icon> </button>
          <button (click)="deleteAccount(account)" class="text-red-500 px-2"><fa-icon [icon]="faThrash"></fa-icon></button>
        </div>
      </li>
      }@empty{
        <p class="text-gray-500 text-lg">Nessun manager trovato.</p>

      }
    </ul>
  </div>
  <div class="bg-white shadow-md rounded-lg p-4">
    <h3 class="text-lg font-semibold mb-2">Agenti</h3>
    <ul>
      @for(account of agents;track account){
      <li class="p-2 border-b last:border-b-0 flex justify-between items-center">
        <span>{{ account.name }} {{ account.lastname }}</span>
        <div class="flex gap-2">
          <button (click)="editAccount(account)" class="text-blue-500 px-2"><fa-icon [icon]="faPen"></fa-icon></button>
          <button (click)="deleteAccount(account)" class="text-red-500 px-2"><fa-icon [icon]="faThrash"></fa-icon></button>
        </div>
      </li>
      }@empty{
        <p class="text-gray-500 text-lg">Nessun agente trovato.</p>

      }
    </ul>
  </div>
</div>
